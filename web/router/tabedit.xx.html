<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>tab edit</title>
	<link rel="stylesheet" href="../css/quasar.min.css">
	<link rel="stylesheet" href="../css/fontawesome.css">
	<link rel="stylesheet" href="../css/material-icons.css">
	<link rel="stylesheet" href="../css/xui.css">
	<script src="../js/jquery.js"></script>
	<script src="../js/vue3.js"></script>
	<script src="../js/tailwind.min.js"></script>
	<script src="../js/common.js"></script>
</head>

<body style="overflow:hidden;" onload="initPage()">
	<div id="app-main" style="width:100%;height:100vh;"></div>
	<template> 
		@@qtabs (main) {
			props { style="height:40px;" }
			tabChange { xx.setTabPage() }
			content <src>
				@@qcarousel-list (main) {
					 props{ style="height:calc(100% - 40px);border:1px solid #aaa;" }
				}
			</src>
			init {
				xx.list=[]
				xx.tabs=[]
				xx.setTabPage = name => {
					if(!name) name=xx.currentTab
					const cur=findFieldValue(xx.tabs, name)
					clog("xxxxxxxxx tab change xxxxxxxxx", xx.currentTab, cur, name)
					if( cur.page ) {
						xx.currentName=name;
					} else {
						global.apiCall('TEXT','api/data/testSrcValue/'+name,src=>{
							global.loadPageSource(name, src, store, page=>{
								cur.page=page;
								xx.currentName=name;
							})
						})
					}
				}
				global.apiCall('GET','api/data/testSrcList', res=>{ 
					const list=res.children
					for(const cur of list ) cur.label=cur.name;
					const node=list[0]
					clog("test src list >>", list, node);
					xx.tabs=list;
					xx.list=list;
					xx.currentTab=node.name;
				})
			}
		}
		
	</template>
	
	
	<script>
		@@js(initPage) { name=test }
	</script>
</body>
</html>
