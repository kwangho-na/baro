<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>draggable</title>
	<link rel="stylesheet" href="/css/winbox.css">
	<link rel="stylesheet" href="/css/quasar.min.css">
	<link rel="stylesheet" href="/css/fa.css">
	<link rel="stylesheet" href="/css/material-icons.css">
	<link rel="stylesheet" href="/css/xui.css">
	<script src="/js/jquery.js"></script>
	<script src="/js/vue3.js"></script>
	<script src="/js/sortable.js"></script> 
	<script src="/js/tailwind.min.js"></script>
	<script src="/js/common.js"></script>
</head>

<body style="overflow:hidden;" onload="initPage()">
<div id="app-main" style="width:100%;height:100vh;"></div>
	
<template> 

<div class="row">
	<dnd-container class="p-2"
		groupName="test"
		behaviour="copy"
		orientation="horizontal"
		:drag-start="e=>global.log('drag start ',e)"
		:drag-end="e=>global.log('drag end ',e)"
		:drag-result="e=>global.log('drag result',e)"
		:drag-enter="e=>global.log('drag enter ',e)"
		:drag-leave="e=>global.log('drag leave ',e)"
		:drop-ready="e=>global.log('drag enter ',e)"
	>
		<dnd v-for="cur in xx.list" :key="cur.id">
			<div style="width:100px;" :style="{background:global.randomColor()}">
				{{ cur.name }}
			</div>
		</dnd>
	</dnd-container>
	
	<dnd-container class="p-2" 
		groupName="test"
		orientation="horizontal"
		:drag-start="e=>global.log('drag start ',e)"
		:drag-end="e=>global.log('drag end ',e)"
		:drag-result="e=>global.log('drag result',e)"
		:drag-enter="e=>global.log('drag enter ',e)"
		:drag-leave="e=>global.log('drag leave ',e)"
		:drop-ready="e=>global.log('drag enter ',e)"
	>
		<dnd v-for="cur in xx.list1" :key="cur.id">
			<div style="width:100px;" :style="{background:global.randomColor()}">
				{{ cur.name }}
			</div>
		</dnd>
	</dnd-container>
</div>

<script>
	xx.enabled= true
	xx.list = [
		{ name: "John1", id: 0 },
		{ name: "Joao2", id: 1 },
		{ name: "Jean3", id: 2 }
	]
	xx.list1 = [
		{ name: "John1", id: 0 },
		{ name: "Joao2", id: 1 },
		{ name: "Jean3", id: 2 }
	]
	xx.dragging= false
	  
	xx.draggingInfo = () =>  xx.dragging ? "under drag" : ""
	
    xx.add = function() {
      xx.list.push({ name: "Juan " + id, id: id++ });
    }
    xx.replace = function() {
      xx.list = [{ name: "Edgard", id: id++ }];
    }
    xx.checkMove = function(e) {
      window.console.log("Future index: " + e.draggedContext.futureIndex);
    }
</script>
		
<style>
</style>

	</template>
	
	
	<script>		
		function initPage() {
			const jsPath='/js', storePath='/js/stores';
			xui.loadModule({
				pinia:				jsPath+'/pinia.js',
				quasar:				jsPath+'/quasar.umd.js',
				'xui/config':		jsPath+'/xui-config.js',
				'xui/dnd':	jsPath+'/xui-dnd.js',
			}, () => {
				const cf=xui.require('config');
				const paths = {
					'store/global': 		storePath+'/store-global.js',
					'store/test': 			storePath+'/store-test.js',
				}
				// paths[subPageCode] = jsPath+'/'+subPageCode+'.js';
				cf.createMainApp(jsPath, storePath)
				if( cf.tailwindUse && window.tailwind ) tailwind.config={ plugins: [initPlugIn()] }
				
				const content=getEl('app-main');
				const components=xui.require('dnd');
				xui.loadModule(paths, () => xui.store('global').loadRoutePage(content,getTemplateSource(),xui.store('test'),components) )
			})
		}
	</script>
</body>
</html>
